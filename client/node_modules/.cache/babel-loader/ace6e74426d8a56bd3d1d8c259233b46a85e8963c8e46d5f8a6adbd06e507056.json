{"ast":null,"code":"import _taggedTemplateLiteral from\"D:/tree/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React from'react';import styled from'@emotion/styled';import{useAuth}from'../contexts/AuthContext';import{db}from'../config/firebase';import{collection,query,where,getDocs}from'firebase/firestore';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  max-width: 400px;\\n  margin: 40px auto;\\n  background: rgba(24, 24, 24, 0.95);\\n  border-radius: 1rem;\\n  padding: 2rem;\\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2);\\n  color: #fff;\\n  text-align: center;\\n\"])));const Title=styled.h2(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  color: #FFD600;\\n  font-size: 2rem;\\n  font-weight: bold;\\n  margin-bottom: 1.5rem;\\n\"])));const CodeBox=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  background: #222;\\n  color: #FFD600;\\n  font-size: 1.5rem;\\n  font-weight: bold;\\n  padding: 12px 24px;\\n  border-radius: 8px;\\n  margin: 16px 0;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 12px;\\n\"])));const CopyButton=styled.button(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  background: #1976d2;\\n  color: #fff;\\n  border: none;\\n  border-radius: 6px;\\n  padding: 6px 12px;\\n  font-size: 1rem;\\n  font-weight: 600;\\n  cursor: pointer;\\n\"])));const Desc=styled.p(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  color: #90caf9;\\n  margin-bottom: 1rem;\\n\"])));const Referrals=()=>{const{userData}=useAuth();const[copied,setCopied]=React.useState(false);const[invitedCount,setInvitedCount]=React.useState(0);React.useEffect(()=>{const fetchInvitedCount=async()=>{if(userData!==null&&userData!==void 0&&userData.id){const q=query(collection(db,'referrals'),where('referrerId','==',userData.id),where('status','==','completed'));const snapshot=await getDocs(q);setInvitedCount(snapshot.size);}};fetchInvitedCount();},[userData]);const handleCopy=()=>{if(userData!==null&&userData!==void 0&&userData.referralCode){navigator.clipboard.writeText(userData.referralCode);setCopied(true);setTimeout(()=>setCopied(false),1500);}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Title,{children:\"M\\u1EDDi b\\u1EA1n b\\xE8\"}),/*#__PURE__*/_jsx(Desc,{children:\"Chia s\\u1EBB m\\xE3 gi\\u1EDBi thi\\u1EC7u b\\xEAn d\\u01B0\\u1EDBi cho b\\u1EA1n b\\xE8. Khi b\\u1EA1n b\\xE8 \\u0111\\u0103ng k\\xFD v\\xE0 nh\\u1EADp m\\xE3 n\\xE0y, c\\u1EA3 hai s\\u1EBD nh\\u1EADn \\u0111\\u01B0\\u1EE3c th\\u01B0\\u1EDFng!\"}),/*#__PURE__*/_jsxs(CodeBox,{children:[(userData===null||userData===void 0?void 0:userData.referralCode)||'Đang tải...',/*#__PURE__*/_jsx(CopyButton,{onClick:handleCopy,children:copied?'Đã sao chép!':'Sao chép'})]}),/*#__PURE__*/_jsxs(Desc,{children:[\"B\\u1EA1n \\u0111\\xE3 m\\u1EDDi \\u0111\\u01B0\\u1EE3c \",/*#__PURE__*/_jsx(\"b\",{children:invitedCount}),\" b\\u1EA1n b\\xE8.\"]}),/*#__PURE__*/_jsx(Desc,{children:\"H\\xE3y m\\u1EDDi th\\u1EADt nhi\\u1EC1u b\\u1EA1n \\u0111\\u1EC3 t\\u0103ng h\\u1EC7 s\\u1ED1 th\\u01B0\\u1EDFng v\\xE0 nh\\u1EADn nhi\\u1EC1u AU h\\u01A1n m\\u1ED7i ng\\xE0y!\"})]});};export default Referrals;","map":{"version":3,"names":["React","styled","useAuth","db","collection","query","where","getDocs","jsx","_jsx","jsxs","_jsxs","Container","div","_templateObject","_taggedTemplateLiteral","Title","h2","_templateObject2","CodeBox","_templateObject3","CopyButton","button","_templateObject4","Desc","p","_templateObject5","Referrals","userData","copied","setCopied","useState","invitedCount","setInvitedCount","useEffect","fetchInvitedCount","id","q","snapshot","size","handleCopy","referralCode","navigator","clipboard","writeText","setTimeout","children","onClick"],"sources":["D:/tree/client/src/pages/Referrals.tsx"],"sourcesContent":["import React from 'react';\r\nimport styled from '@emotion/styled';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { db } from '../config/firebase';\r\nimport { collection, query, where, getDocs } from 'firebase/firestore';\r\n\r\nconst Container = styled.div`\r\n  max-width: 400px;\r\n  margin: 40px auto;\r\n  background: rgba(24, 24, 24, 0.95);\r\n  border-radius: 1rem;\r\n  padding: 2rem;\r\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2);\r\n  color: #fff;\r\n  text-align: center;\r\n`;\r\n\r\nconst Title = styled.h2`\r\n  color: #FFD600;\r\n  font-size: 2rem;\r\n  font-weight: bold;\r\n  margin-bottom: 1.5rem;\r\n`;\r\n\r\nconst CodeBox = styled.div`\r\n  background: #222;\r\n  color: #FFD600;\r\n  font-size: 1.5rem;\r\n  font-weight: bold;\r\n  padding: 12px 24px;\r\n  border-radius: 8px;\r\n  margin: 16px 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 12px;\r\n`;\r\n\r\nconst CopyButton = styled.button`\r\n  background: #1976d2;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 6px;\r\n  padding: 6px 12px;\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst Desc = styled.p`\r\n  color: #90caf9;\r\n  margin-bottom: 1rem;\r\n`;\r\n\r\nconst Referrals: React.FC = () => {\r\n  const { userData } = useAuth();\r\n  const [copied, setCopied] = React.useState(false);\r\n  const [invitedCount, setInvitedCount] = React.useState(0);\r\n\r\n  React.useEffect(() => {\r\n    const fetchInvitedCount = async () => {\r\n      if (userData?.id) {\r\n        const q = query(\r\n          collection(db, 'referrals'),\r\n          where('referrerId', '==', userData.id),\r\n          where('status', '==', 'completed')\r\n        );\r\n        const snapshot = await getDocs(q);\r\n        setInvitedCount(snapshot.size);\r\n      }\r\n    };\r\n    fetchInvitedCount();\r\n  }, [userData]);\r\n\r\n  const handleCopy = () => {\r\n    if (userData?.referralCode) {\r\n      navigator.clipboard.writeText(userData.referralCode);\r\n      setCopied(true);\r\n      setTimeout(() => setCopied(false), 1500);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <Title>Mời bạn bè</Title>\r\n      <Desc>Chia sẻ mã giới thiệu bên dưới cho bạn bè. Khi bạn bè đăng ký và nhập mã này, cả hai sẽ nhận được thưởng!</Desc>\r\n      <CodeBox>\r\n        {userData?.referralCode || 'Đang tải...'}\r\n        <CopyButton onClick={handleCopy}>{copied ? 'Đã sao chép!' : 'Sao chép'}</CopyButton>\r\n      </CodeBox>\r\n      <Desc>Bạn đã mời được <b>{invitedCount}</b> bạn bè.</Desc>\r\n      <Desc>Hãy mời thật nhiều bạn để tăng hệ số thưởng và nhận nhiều AU hơn mỗi ngày!</Desc>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Referrals; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}